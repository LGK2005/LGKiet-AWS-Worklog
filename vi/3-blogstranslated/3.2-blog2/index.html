<!doctype html><html lang=vi class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.134.3"><meta name=description content><meta name=author content="thienlh@thienlu.com"><link rel=icon href=../../../images/favicon.png type=image/png><title>Blog 2 :: Báo cáo thực tập</title>
<link href=../../../css/nucleus.css?1765364000 rel=stylesheet><link href=../../../css/fontawesome-all.min.css?1765364000 rel=stylesheet><link href=../../../css/hybrid.css?1765364000 rel=stylesheet><link href=../../../css/featherlight.min.css?1765364000 rel=stylesheet><link href=../../../css/perfect-scrollbar.min.css?1765364000 rel=stylesheet><link href=../../../css/auto-complete.css?1765364000 rel=stylesheet><link href=../../../css/atom-one-dark-reasonable.css?1765364000 rel=stylesheet><link href=../../../css/theme.css?1765364000 rel=stylesheet><link href=../../../css/hugo-theme.css?1765364000 rel=stylesheet><link href=../../../css/theme-workshop.css?1765364000 rel=stylesheet><script src=../../../js/jquery-3.3.1.min.js?1765364000></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=../../../vi/3-blogstranslated/3.2-blog2/><nav id=sidebar class=showVisitedLinks><div id=header-wrapper><div id=header><a id=logo href=../../../><svg id="Layer_1" data-name="Layer 1" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff}.cls-2{fill:#f90;fill-rule:evenodd}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09 10.85a4.7 4.7.0 00.19 1.48 7.73 7.73.0 00.54 1.19.77.77.0 01.12.38.64.64.0 01-.32.49l-1 .7a.83.83.0 01-.44.15.69.69.0 01-.49-.23 3.8 3.8.0 01-.6-.77q-.25-.42-.51-1a6.14 6.14.0 01-4.89 2.3 4.54 4.54.0 01-3.32-1.19 4.27 4.27.0 01-1.22-3.2 4.28 4.28.0 011.46-3.4A6.06 6.06.0 017.69 6.46a12.47 12.47.0 011.76.13q.92.13 1.91.36V5.73a3.65 3.65.0 00-.79-2.66A3.81 3.81.0 007.86 2.3a7.71 7.71.0 00-1.79.22 12.78 12.78.0 00-1.79.57 4.55 4.55.0 01-.58.22h-.26q-.35.0-.35-.52V2a1.09 1.09.0 01.12-.58 1.2 1.2.0 01.47-.35A10.88 10.88.0 015.77.32 10.19 10.19.0 018.36.0a6 6 0 014.35 1.35 5.49 5.49.0 011.38 4.09zM7.34 13.38a5.36 5.36.0 001.72-.31A3.63 3.63.0 0010.63 12 2.62 2.62.0 0011.19 11a5.63 5.63.0 00.16-1.44v-.7a14.35 14.35.0 00-1.53-.28 12.37 12.37.0 00-1.56-.1 3.84 3.84.0 00-2.47.67A2.34 2.34.0 005 11a2.35 2.35.0 00.61 1.76A2.4 2.4.0 007.34 13.38zm13.35 1.8a1 1 0 01-.64-.16 1.3 1.3.0 01-.35-.65L15.81 1.51a3 3 0 01-.15-.67.36.36.0 01.41-.41H17.7a1 1 0 01.65.16 1.4 1.4.0 01.33.65l2.79 11 2.59-11A1.17 1.17.0 0124.39.6a1.1 1.1.0 01.67-.16H26.4a1.1 1.1.0 01.67.16 1.17 1.17.0 01.32.65L30 12.39 32.88 1.25A1.39 1.39.0 0133.22.6a1 1 0 01.65-.16h1.54a.36.36.0 01.41.41 1.36 1.36.0 010 .26 3.64 3.64.0 01-.12.41l-4 12.86a1.3 1.3.0 01-.35.65 1 1 0 01-.64.16H29.25a1 1 0 01-.67-.17 1.26 1.26.0 01-.32-.67L25.67 3.64l-2.56 10.7a1.26 1.26.0 01-.32.67 1 1 0 01-.67.17zm21.36.44a11.28 11.28.0 01-2.56-.29 7.44 7.44.0 01-1.92-.67 1 1 0 01-.61-.93v-.84q0-.52.38-.52a.9.9.0 01.31.06l.42.17a8.77 8.77.0 001.83.58 9.78 9.78.0 002 .2 4.48 4.48.0 002.43-.55 1.76 1.76.0 00.86-1.57 1.61 1.61.0 00-.45-1.16A4.29 4.29.0 0043 9.22l-2.41-.76A5.15 5.15.0 0138 6.78a3.94 3.94.0 01-.83-2.41 3.7 3.7.0 01.45-1.85 4.47 4.47.0 011.19-1.37 5.27 5.27.0 011.7-.86A7.4 7.4.0 0142.6.0a8.87 8.87.0 011.12.07q.57.07 1.08.19t.95.26a4.27 4.27.0 01.7.29 1.59 1.59.0 01.49.41.94.94.0 01.15.55v.79q0 .52-.38.52a1.76 1.76.0 01-.64-.2 7.74 7.74.0 00-3.2-.64 4.37 4.37.0 00-2.21.47 1.6 1.6.0 00-.79 1.48 1.58 1.58.0 00.49 1.18 4.94 4.94.0 001.83.92L44.55 7a5.08 5.08.0 012.57 1.6A3.76 3.76.0 0147.9 11a4.21 4.21.0 01-.44 1.93 4.4 4.4.0 01-1.21 1.47 5.43 5.43.0 01-1.85.93A8.25 8.25.0 0142.05 15.62z"/><path class="cls-2" d="M45.19 23.81C39.72 27.85 31.78 30 25 30A36.64 36.64.0 01.22 20.57c-.51-.46-.06-1.09.56-.74A49.78 49.78.0 0025.53 26.4 49.23 49.23.0 0044.4 22.53C45.32 22.14 46.1 23.14 45.19 23.81z"/><path class="cls-2" d="M47.47 21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74 3.13-2.2 8.27-1.57 8.86-.83s-.16 5.89-3.09 8.35c-.45.38-.88.18-.68-.32C46.69 25.8 48.17 22.11 47.47 21.21z"/></svg></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=../../../js/lunr.min.js?1765364000></script><script type=text/javascript src=../../../js/auto-complete.js?1765364000></script><script type=text/javascript>var baseurl="https://LGK2005.github.io/LGKiet-AWS-Worklog//vi"</script><script type=text/javascript src=../../../js/search.js?1765364000></script></div><div class=highlightable><ul class=topics><li data-nav-id=/vi/1-worklog/ title="Nhật ký công việc" class=dd-item><a href=../../../vi/1-worklog/><b>1. </b>Nhật ký công việc
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/1-worklog/1.1-week1/ title="Nhật ký tuần 1" class=dd-item><a href=../../../vi/1-worklog/1.1-week1/><b>1.1. </b>Nhật ký tuần 1
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.2-week2/ title="Nhật ký tuần 2" class=dd-item><a href=../../../vi/1-worklog/1.2-week2/><b>1.2. </b>Nhật ký tuần 2
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.3-week3/ title="Nhật ký tuần 3" class=dd-item><a href=../../../vi/1-worklog/1.3-week3/><b>1.3. </b>Nhật ký tuần 3
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.4-week4/ title="Nhật ký tuần 4" class=dd-item><a href=../../../vi/1-worklog/1.4-week4/><b>1.4. </b>Nhật ký tuần 4
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.5-week5/ title="Nhật ký tuần 5" class=dd-item><a href=../../../vi/1-worklog/1.5-week5/><b>1.5. </b>Nhật ký tuần 5
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.6-week6/ title="Nhật ký tuần 6" class=dd-item><a href=../../../vi/1-worklog/1.6-week6/><b>1.6. </b>Nhật ký tuần 6
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.7-week7/ title="Nhật ký tuần 7" class=dd-item><a href=../../../vi/1-worklog/1.7-week7/><b>1.7. </b>Nhật ký tuần 7
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.8-week8/ title="Nhật ký tuần 8" class=dd-item><a href=../../../vi/1-worklog/1.8-week8/><b>1.8. </b>Nhật ký tuần 8
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.9-week9/ title="Nhật ký tuần 9" class=dd-item><a href=../../../vi/1-worklog/1.9-week9/><b>1.9. </b>Nhật ký tuần 9
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.10-week10/ title="Nhật ký tuần 10" class=dd-item><a href=../../../vi/1-worklog/1.10-week10/><b>1.10. </b>Nhật ký tuần 10
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.11-week11/ title="Nhật ký tuần 11" class=dd-item><a href=../../../vi/1-worklog/1.11-week11/><b>1.11. </b>Nhật ký tuần 11
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.12-week12/ title="Nhật ký tuần 12" class=dd-item><a href=../../../vi/1-worklog/1.12-week12/><b>1.12. </b>Nhật ký tuần 12
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.13-week13/ title="Nhật ký tuần 13" class=dd-item><a href=../../../vi/1-worklog/1.13-week13/><b>1.13. </b>Nhật ký tuần 13
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/2-proposal/ title="Bản đề xuất" class=dd-item><a href=../../../vi/2-proposal/><b>2. </b>Bản đề xuất
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/3-blogstranslated/ title="Các bài blogs đã dịch" class="dd-item
parent"><a href=../../../vi/3-blogstranslated/><b>3. </b>Các bài blogs đã dịch
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/3-blogstranslated/3.1-blog1/ title="Blog 1" class=dd-item><a href=../../../vi/3-blogstranslated/3.1-blog1/><b>3.1. </b>Blog 1
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/3-blogstranslated/3.3-blog3/ title="Blog 3" class=dd-item><a href=../../../vi/3-blogstranslated/3.3-blog3/><b>3.3. </b>Blog 3
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/3-blogstranslated/3.2-blog2/ title="Blog 2" class="dd-item
active"><a href=../../../vi/3-blogstranslated/3.2-blog2/><b>3.2. </b>Blog 2
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/4-eventparticipated/ title="Các sự kiện đã tham gia" class=dd-item><a href=../../../vi/4-eventparticipated/><b>4. </b>Các sự kiện đã tham gia
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/4-eventparticipated/4.1-event1/ title="Event 1" class=dd-item><a href=../../../vi/4-eventparticipated/4.1-event1/><b>4.1. </b>Event 1
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/4-eventparticipated/4.2-event2/ title="Event 2" class=dd-item><a href=../../../vi/4-eventparticipated/4.2-event2/><b>4.2. </b>Event 2
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/4-eventparticipated/4.3-event3/ title="Event 3" class=dd-item><a href=../../../vi/4-eventparticipated/4.3-event3/><b>4.3. </b>Event 3
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/4-eventparticipated/4.4-event4/ title="Event 4" class=dd-item><a href=../../../vi/4-eventparticipated/4.4-event4/><b>4.4. </b>Event 4
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/4-eventparticipated/4.5-event5/ title="Event 5" class=dd-item><a href=../../../vi/4-eventparticipated/4.5-event5/><b>4.5. </b>Event 5
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/5-workshop/ title=Workshop class=dd-item><a href=../../../vi/5-workshop/><b>5. </b>Workshop
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/5-workshop/5.1-workshop-overview/ title="Tổng quan" class=dd-item><a href=../../../vi/5-workshop/5.1-workshop-overview/><b>5.1. </b>Tổng quan
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.2-prerequiste/ title="Điều kiện tiên quyết" class=dd-item><a href=../../../vi/5-workshop/5.2-prerequiste/><b>5.2. </b>Điều kiện tiên quyết
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.3-foundation-setup/ title="Thiết lập nền tảng" class=dd-item><a href=../../../vi/5-workshop/5.3-foundation-setup/><b>5.3. </b>Thiết lập nền tảng
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/5-workshop/5.3-foundation-setup/5.3.1-set-up-s3-buckets/ title="Thiết lập S3 buckets" class=dd-item><a href=../../../vi/5-workshop/5.3-foundation-setup/5.3.1-set-up-s3-buckets/><b>5.3.1. </b>Thiết lập S3 buckets
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.3-foundation-setup/5.3.2-set-up-s3-buckets-policies/ title="Thiết lập S3 buckets policies" class=dd-item><a href=../../../vi/5-workshop/5.3-foundation-setup/5.3.2-set-up-s3-buckets-policies/><b>5.3.2. </b>Thiết lập S3 buckets policies
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.3-foundation-setup/5.3.3-create-iam-roles-and-policies/ title="Tạo IAM Roles và Policies" class=dd-item><a href=../../../vi/5-workshop/5.3-foundation-setup/5.3.3-create-iam-roles-and-policies/><b>5.3.3. </b>Tạo IAM Roles và Policies
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/5-workshop/5.3-foundation-setup/5.3.3-create-iam-roles-and-policies/5.3.3.1-create-lambda-excecution-roles/ title="Tạo Lambda Execution Roles" class=dd-item><a href=../../../vi/5-workshop/5.3-foundation-setup/5.3.3-create-iam-roles-and-policies/5.3.3.1-create-lambda-excecution-roles/><b>5.3.3.1. </b>Tạo Lambda Execution Roles
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.3-foundation-setup/5.3.3-create-iam-roles-and-policies/5.3.3.2-create-service-roles/ title="Tạo Service Roles" class=dd-item><a href=../../../vi/5-workshop/5.3-foundation-setup/5.3.3-create-iam-roles-and-policies/5.3.3.2-create-service-roles/><b>5.3.3.2. </b>Tạo Service Roles
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.3-foundation-setup/5.3.3-create-iam-roles-and-policies/5.3.3.3-create-iam-policy/ title="Tạo IAM Policy" class=dd-item><a href=../../../vi/5-workshop/5.3-foundation-setup/5.3.3-create-iam-roles-and-policies/5.3.3.3-create-iam-policy/><b>5.3.3.3. </b>Tạo IAM Policy
<i class="fas fa-check read-icon"></i></a></li></ul></li></ul></li><li data-nav-id=/vi/5-workshop/5.4-monitoring-setup/ title="Thiết lập giám sát" class=dd-item><a href=../../../vi/5-workshop/5.4-monitoring-setup/><b>5.4. </b>Thiết lập giám sát
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/5-workshop/5.4-monitoring-setup/5.4.1-prepare/ title="Chuẩn bị tài nguyên" class=dd-item><a href=../../../vi/5-workshop/5.4-monitoring-setup/5.4.1-prepare/><b>5.4.1 </b>Chuẩn bị tài nguyên
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.4-monitoring-setup/5.4.2-create-interface-enpoint/ title="Tạo một S3 Interface endpoint" class=dd-item><a href=../../../vi/5-workshop/5.4-monitoring-setup/5.4.2-create-interface-enpoint/><b>5.4.2 </b>Tạo một S3 Interface endpoint
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.4-monitoring-setup/5.4.3-test-endpoint/ title="Kiểm tra Interface Endpoint" class=dd-item><a href=../../../vi/5-workshop/5.4-monitoring-setup/5.4.3-test-endpoint/><b>5.4.3 </b>Kiểm tra Interface Endpoint
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.4-monitoring-setup/5.4.4-dns-simulation/ title="Mô phỏng On-premises DNS " class=dd-item><a href=../../../vi/5-workshop/5.4-monitoring-setup/5.4.4-dns-simulation/><b>5.4.4 </b>Mô phỏng On-premises DNS
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/5-workshop/5.5-processing-setup/ title="Thiết lập xử lý" class=dd-item><a href=../../../vi/5-workshop/5.5-processing-setup/><b>5.5. </b>Thiết lập xử lý
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/5-workshop/5.5-processing-setup/5.5.1-create-kinesis-data-firehose/ title="Tạo Kinesis Data Firehose" class=dd-item><a href=../../../vi/5-workshop/5.5-processing-setup/5.5.1-create-kinesis-data-firehose/><b>5.5.1. </b>Tạo Kinesis Data Firehose
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.5-processing-setup/5.5.2-create-aws-glue-database-and-tables/ title="Tạo AWS Glue Database và Tables" class=dd-item><a href=../../../vi/5-workshop/5.5-processing-setup/5.5.2-create-aws-glue-database-and-tables/><b>5.5.2. </b>Tạo AWS Glue Database và Tables
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.5-processing-setup/5.5.3-create-lambda-function-etl-processing/ title="Tạo Lambda Function - Xử lý ETL" class=dd-item><a href=../../../vi/5-workshop/5.5-processing-setup/5.5.3-create-lambda-function-etl-processing/><b>5.5.3. </b>Tạo Lambda Function - Xử lý ETL
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/5-workshop/5.8-use-cdk/ title="Dọn dẹp tài nguyên" class=dd-item><a href=../../../vi/5-workshop/5.8-use-cdk/><b>5.6. </b>Dọn dẹp tài nguyên
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.9-cleanup/ title="Dọn dẹp tài nguyên" class=dd-item><a href=../../../vi/5-workshop/5.9-cleanup/><b>5.6. </b>Dọn dẹp tài nguyên
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.6-automation-setup/ title="Thiết lập tự động hóa" class=dd-item><a href=../../../vi/5-workshop/5.6-automation-setup/><b>5.6. </b>Thiết lập tự động hóa
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.7-dashboard-setup/ title="Thiết lập Dashboard" class=dd-item><a href=../../../vi/5-workshop/5.7-dashboard-setup/><b>5.7. </b>Thiết lập Dashboard
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/5-workshop/5.7-dashboard-setup/5.7.1-setup-s3/ title="Cài đặt S3 Bucket cho Dashboard" class=dd-item><a href=../../../vi/5-workshop/5.7-dashboard-setup/5.7.1-setup-s3/><b>5.7.1. </b>Cài đặt S3 Bucket cho Dashboard
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.7-dashboard-setup/5.7.2-setup-lambda/ title="Cài đặt IAM Roles và Policies" class=dd-item><a href=../../../vi/5-workshop/5.7-dashboard-setup/5.7.2-setup-lambda/><b>5.7.2. </b>Cài đặt IAM Roles và Policies
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/5-workshop/5.7-dashboard-setup/5.7.2-setup-lambda/5.7.2.1-create-iam-role-and-policy-for-lambda/ title="Cài đặt IAM Role và Policy cho Lambda" class=dd-item><a href=../../../vi/5-workshop/5.7-dashboard-setup/5.7.2-setup-lambda/5.7.2.1-create-iam-role-and-policy-for-lambda/><b>5.7.2.1. </b>Cài đặt IAM Role và Policy cho Lambda
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.7-dashboard-setup/5.7.2-setup-lambda/5.7.2.2-create-lambda-function/ title="Cài đặt Lambda" class=dd-item><a href=../../../vi/5-workshop/5.7-dashboard-setup/5.7.2-setup-lambda/5.7.2.2-create-lambda-function/><b>5.7.2.2. </b>Cài đặt Lambda
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/5-workshop/5.7-dashboard-setup/5.7.3-setup-api-gateway/ title="Cài đặt API Gateway" class=dd-item><a href=../../../vi/5-workshop/5.7-dashboard-setup/5.7.3-setup-api-gateway/><b>5.7.3. </b>Cài đặt API Gateway
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.7-dashboard-setup/5.7.4-setup-cloudfront/ title="Cài đặt Cloudfront" class=dd-item><a href=../../../vi/5-workshop/5.7-dashboard-setup/5.7.4-setup-cloudfront/><b>5.7.4. </b>Cài đặt Cloudfront
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.7-dashboard-setup/5.7.5-setup-cognito/ title="Cài đặt Cognito" class=dd-item><a href=../../../vi/5-workshop/5.7-dashboard-setup/5.7.5-setup-cognito/><b>5.7.5. </b>Cài đặt Cognito
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/5-workshop/5.8-verify-setup/ title="Kiểm tra thiết lập" class=dd-item><a href=../../../vi/5-workshop/5.8-verify-setup/><b>5.8. </b>Kiểm tra thiết lập
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.9-use-cdk/ title="Sử dụng CDK" class=dd-item><a href=../../../vi/5-workshop/5.9-use-cdk/><b>5.9. </b>Sử dụng CDK
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.10-cleanup/ title="Dọn dẹp" class=dd-item><a href=../../../vi/5-workshop/5.10-cleanup/><b>5.10. </b>Dọn dẹp
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/5-workshop/5.10-cleanup/5.10.2-cdk-cleanup/ title="Dọn dẹp CDK" class=dd-item><a href=../../../vi/5-workshop/5.10-cleanup/5.10.2-cdk-cleanup/><b>5.10.2. </b>Dọn dẹp CDK
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.10-cleanup/5.10.1-manual-cleanup/ title="Dọn dẹp thủ công" class=dd-item><a href=../../../vi/5-workshop/5.10-cleanup/5.10.1-manual-cleanup/><b>5.10.1 </b>Dọn dẹp thủ công
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/5-workshop/5.11-appendices/ title="Phụ lục" class=dd-item><a href=../../../vi/5-workshop/5.11-appendices/><b>5.11. </b>Phụ lục
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/5-workshop/5.11-appendices/5.11.1-cloudtrail-etl/ title="Mã CloudTrail ETL" class=dd-item><a href=../../../vi/5-workshop/5.11-appendices/5.11.1-cloudtrail-etl/><b>5.11.1. </b>Mã CloudTrail ETL
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.11-appendices/5.11.2-guardduty-etl/ title="Mã GuardDuty ETL" class=dd-item><a href=../../../vi/5-workshop/5.11-appendices/5.11.2-guardduty-etl/><b>5.11.2. </b>Mã GuardDuty ETL
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.11-appendices/5.11.3-cloudwatch-etl/ title="Mã CloudWatch ETL" class=dd-item><a href=../../../vi/5-workshop/5.11-appendices/5.11.3-cloudwatch-etl/><b>5.11.3. </b>Mã CloudWatch ETL
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.11-appendices/5.11.4-cloudwatch-eni-etl/ title="Mã CloudWatch ENI ETL" class=dd-item><a href=../../../vi/5-workshop/5.11-appendices/5.11.4-cloudwatch-eni-etl/><b>5.11.4. </b>Mã CloudWatch ENI ETL
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.11-appendices/5.11.5-cloudwatch-autoexport/ title="Mã CloudWatch Autoexport" class=dd-item><a href=../../../vi/5-workshop/5.11-appendices/5.11.5-cloudwatch-autoexport/><b>5.11.5. </b>Mã CloudWatch Autoexport
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.11-appendices/5.11.6-parse-findings/ title="Mã Parse Findings" class=dd-item><a href=../../../vi/5-workshop/5.11-appendices/5.11.6-parse-findings/><b>5.11.6. </b>Mã Parse Findings
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.11-appendices/5.11.7-isolate-ec2/ title="Mã Isolate EC2" class=dd-item><a href=../../../vi/5-workshop/5.11-appendices/5.11.7-isolate-ec2/><b>5.11.7. </b>Mã Isolate EC2
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.11-appendices/5.11.8-quarantine-iam/ title="Mã Quarantine IAM" class=dd-item><a href=../../../vi/5-workshop/5.11-appendices/5.11.8-quarantine-iam/><b>5.11.8. </b>Mã Quarantine IAM
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.11-appendices/5.11.9-alert-dispatch/ title="Mã Alert Dispatch" class=dd-item><a href=../../../vi/5-workshop/5.11-appendices/5.11.9-alert-dispatch/><b>5.11.9. </b>Mã Alert Dispatch
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.11-appendices/5.11.10-step-functions-state-machine-definition/ title="Mã Định nghĩa Step Functions ASL" class=dd-item><a href=../../../vi/5-workshop/5.11-appendices/5.11.10-step-functions-state-machine-definition/><b>5.11.10. </b>Mã Định nghĩa Step Functions ASL
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.11-appendices/5.11-appendices/ title="Phụ lục" class=dd-item><a href=../../../vi/5-workshop/5.11-appendices/5.11-appendices/><b>5.11. </b>Phụ lục
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/5-workshop/5.11-appendices/5.11-appendices/5.11.9-alert-dispatch/ title="Mã Alert Dispatch" class=dd-item><a href=../../../vi/5-workshop/5.11-appendices/5.11-appendices/5.11.9-alert-dispatch/><b>5.11.1. </b>Mã Alert Dispatch
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.11-appendices/5.11-appendices/5.11.1-cloudtrail-etl/ title="Mã CloudTrail ETL" class=dd-item><a href=../../../vi/5-workshop/5.11-appendices/5.11-appendices/5.11.1-cloudtrail-etl/><b>5.11.1. </b>Mã CloudTrail ETL
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.11-appendices/5.11-appendices/5.11.2-guardduty-etl/ title="Mã GuardDuty ETL" class=dd-item><a href=../../../vi/5-workshop/5.11-appendices/5.11-appendices/5.11.2-guardduty-etl/><b>5.11.2. </b>Mã GuardDuty ETL
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.11-appendices/5.11-appendices/5.11.3-cloudwatch-etl/ title="Mã CloudWatch ETL" class=dd-item><a href=../../../vi/5-workshop/5.11-appendices/5.11-appendices/5.11.3-cloudwatch-etl/><b>5.11.3. </b>Mã CloudWatch ETL
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.11-appendices/5.11-appendices/5.11.4-cloudwatch-eni-etl/ title="Mã CloudWatch ENI ETL" class=dd-item><a href=../../../vi/5-workshop/5.11-appendices/5.11-appendices/5.11.4-cloudwatch-eni-etl/><b>5.11.4. </b>Mã CloudWatch ENI ETL
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.11-appendices/5.11-appendices/5.11.5-cloudwatch-autoexport/ title="Mã CloudWatch Autoexport" class=dd-item><a href=../../../vi/5-workshop/5.11-appendices/5.11-appendices/5.11.5-cloudwatch-autoexport/><b>5.11.5. </b>Mã CloudWatch Autoexport
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.11-appendices/5.11-appendices/5.11.6-parse-findings/ title="Mã Parse Findings" class=dd-item><a href=../../../vi/5-workshop/5.11-appendices/5.11-appendices/5.11.6-parse-findings/><b>5.11.6. </b>Mã Parse Findings
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.11-appendices/5.11-appendices/5.11.7-isolate-ec2/ title="Mã Isolate EC2" class=dd-item><a href=../../../vi/5-workshop/5.11-appendices/5.11-appendices/5.11.7-isolate-ec2/><b>5.11.7. </b>Mã Isolate EC2
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.11-appendices/5.11-appendices/5.11.8-quarantine-iam/ title="Mã Quarantine IAM" class=dd-item><a href=../../../vi/5-workshop/5.11-appendices/5.11-appendices/5.11.8-quarantine-iam/><b>5.11.8. </b>Mã Quarantine IAM
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.11-appendices/5.11-appendices/5.11.10-step-functions-state-machine-definition/ title="Mã Định nghĩa Step Functions ASL" class=dd-item><a href=../../../vi/5-workshop/5.11-appendices/5.11-appendices/5.11.10-step-functions-state-machine-definition/><b>5.11.10. </b>Mã Định nghĩa Step Functions ASL
<i class="fas fa-check read-icon"></i></a></li></ul></li></ul></li></ul></li><li data-nav-id=/vi/6-self-evaluation/ title="Tự đánh giá" class=dd-item><a href=../../../vi/6-self-evaluation/><b>6. </b>Tự đánh giá
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/7-feedback/ title="Chia sẻ, đóng góp ý kiến" class=dd-item><a href=../../../vi/7-feedback/><b>7. </b>Chia sẻ, đóng góp ý kiến
<i class="fas fa-check read-icon"></i></a></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://www.facebook.com/groups/awsstudygroupfcj/><i class='fab fa-facebook'></i> AWS Study Group</a></li></ul></section><section id=prefooter><hr><ul><li><a class=padding><i class="fas fa-language fa-fw"></i><div class=select-style><select id=select-language onchange="location=this.value"><option id=en value=https://LGK2005.github.io/LGKiet-AWS-Worklog/3-blogstranslated/3.2-blog2/>English</option><option id=vi value=https://LGK2005.github.io/LGKiet-AWS-Worklog/vi/3-blogstranslated/3.2-blog2/ selected>Tiếng Việt</option></select><svg id="Capa_1" xmlns:xlink="http://www.w3.org/1999/xlink" width="255" height="255" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255"><g><g id="arrow-drop-down"><polygon points="0,63.75 127.5,191.25 255,63.75"/></g></g></svg></div></a></li><li><a class=padding href=# data-clear-history-toggle><i class="fas fa-history fa-fw"></i> Clear History</a></li></ul></section><section id=footer><left><b>Workshop</b><br><img src="https://hitwebcounter.com/counter/counter.php?page=7920860&style=0038&nbdigits=9&type=page&initCount=0" title=Migrate alt="web counter" border=0></a><br><b><a href=https://cloudjourney.awsstudygroup.com/>Cloud Journey</a></b><br><img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0" title="Total CLoud Journey" alt="web counter" border=0>
</left><left><br><br><b>Last Updated</b><br><i><span id=lastUpdated style=color:orange></span>
</i><script>const today=new Date,formattedDate=today.toLocaleDateString("en-GB");document.getElementById("lastUpdated").textContent=formattedDate</script></left><left><br><br><b>Team</b><br><i><a href=https://www.facebook.com/groups/660548818043427 style=color:orange>First Cloud Journey</a><br></i></left><script async defer src=https://buttons.github.io/buttons.js></script></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i>
</a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=../../../vi/>Báo cáo thực tập</a> > <a href=../../../vi/3-blogstranslated/>Các bài blogs đã dịch</a> > Blog 2</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#tổng-quan-giải-pháp><strong>Tổng quan giải pháp﻿</strong></a></li><li><a href=#nhu-cầu-về-sharding><strong>Nhu cầu về sharding﻿</strong></a></li><li><a href=#lựa-chọn-primary-key-cho-gsi><strong>Lựa chọn primary key cho GSI﻿</strong></a></li><li><a href=#tối-ưu-chi-phí-indexing><strong>Tối ưu chi phí﻿ Indexing</strong></a></li><li><a href=#mô-hình-dữ-liệu-mẫu><strong>Mô hình dữ liệu mẫu﻿</strong></a></li><li><a href=#điều-kiện-tiên-quyết><strong>Điều kiện tiên quyết﻿</strong></a></li><li><a href=#tạo-bảng-dynamodb-với-gsi><strong>Tạo bảng DynamoDB với GSI﻿</strong></a></li><li><a href=#tạo-lambda-function><strong>Tạo Lambda﻿ function</strong></a></li><li><a href=#tạo-eventbridge-scheduler><strong>Tạo EventBridge Scheduler﻿</strong></a></li><li><a href=#tạo-mục-mẫu-để-xem-giải-pháp-hoạt-động><strong>Tạo mục mẫu để xem giải pháp hoạt động﻿</strong></a></li><li><a href=#cân-nhắc-chi-phí><strong>Cân nhắc chi phí﻿</strong></a></li><li><a href=#dọn-dẹp><strong>Dọn dẹp﻿</strong></a></li><li><a href=#tóm-tắt><strong>Tóm tắt﻿</strong></a></li><li><a href=#về-các-tác-giả><strong>Về các tác giả﻿</strong></a></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Blog 2</h1><h1 id=triển-khai-kiến-trúc-hướng-sự-kiện-với-amazon-dynamodb--phần-2><strong>Triển khai kiến trúc hướng sự kiện với Amazon DynamoDB – Phần 2﻿</strong></h1><p>bởi Aman Dhingra và Lee Hannigan | vào ngày 25 tháng 9 năm 2025 | trong <a href=https://aws.amazon.com/blogs/database/category/learning-levels/advanced-300/>Advanced (300)</a>, <a href=https://aws.amazon.com/blogs/database/category/database/amazon-dynamodb/>Amazon DynamoDB</a>, <a href=https://aws.amazon.com/blogs/database/category/application-integration/amazon-eventbridge/>Amazon EventBridge</a>, <a href=https://aws.amazon.com/blogs/database/category/compute/aws-lambda/>AWS Lambda</a>, <a href=https://aws.amazon.com/blogs/database/category/serverless/>Serverless</a>, <a href=https://aws.amazon.com/blogs/database/category/post-types/technical-how-to/>Technical How-to</a></p><p>Trong <a href=https://aws.amazon.com/blogs/database/implement-event-driven-architectures-with-amazon-dynamodb/>bài đăng trước﻿</a> (Phần 1﻿) của loạt bài này, chúng tôi đã thảo luận về cách bạn có thể sử dụng﻿ <a href=https://docs.aws.amazon.com/scheduler/latest/UserGuide/what-is-scheduler.html>Amazon EventBridge Scheduler</a> để quản lý loại bỏ dữ liệu chính xác trong﻿ <a href=https://aws.amazon.com/dynamodb/>Amazon DynamoDB</a>. Trong bài đăng này﻿ (Phần 2﻿), chúng tôi khám phá một phương pháp khác sử dụng﻿ <a href=https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/GSI.html>global secondary indexes</a> (GSIs) để xử lý các yêu cầu Time to Live (TTL) chi tiết﻿.</p><p>Khi xử lý các ứng dụng thông lượng cao, việc kiểm soát chính xác về thời hạn dữ liệu là quan trọng. Sự trзадержка tự nhiên trong tính năng TTL gốc của DynamoDB có thể không luôn đáp ứng nhu cầu của các ứng dụng yêu cầu loại bỏ dữ liệu ngay lập tức. Bằng cách sử dụng GSIs, chúng ta có thể tạo ra một hệ thống phản hồi tốt hơn phù hợp với các yêu cầu thời gian thực của ứng dụng.</p><h2 id=tổng-quan-giải-pháp><strong>Tổng quan giải pháp﻿</strong></h2><p>Sử dụng GSI cho trường hợp sử dụng này cho phép bạn truy vấn hiệu quả dữ liệu đủ điều kiện để loại bỏ theo các khoảng thời gian phù hợp với nhu cầu cụ thể của bạn. Giải pháp này có thể cung cấp độ chi tiết gần thời gian thực, tương tự như phương pháp EventBridge Scheduler trước đó. Bằng cách thiết lập một <a href=https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/bp-indexes-gsi-sharding.html>sharded GSI</a> với thuộc tính TTL làm sort key, chúng ta có thể định kỳ truy vấn và loại bỏ các mục hết hạn với độ chính xác gần 1 phút﻿.</p><p>Sơ đồ sau đây minh họa kiến trúc giải pháp﻿.</p><ol><li><p>EventBridge Scheduler kích hoạt một Lambda function theo lịch trình đã định﻿.</p></li><li><p>Lambda function truy vấn GSI để lấy các mục được đánh dấu để xóa﻿.</p></li><li><p>Lambda function xóa các mục đã lấy từ bảng DynamoDB﻿.</p></li></ol><p><img src=../../../images/3-Blog/Blog-2/image_1.png></p><h2 id=nhu-cầu-về-sharding><strong>Nhu cầu về sharding﻿</strong></h2><p>Để quản lý hiệu quả thông lượng ghi và đọc cao﻿, <a href=https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/bp-indexes-gsi-sharding.html>sharding</a> GSI là cần thiết. Sharding phân phối tải trên nhiều partition, ngăn chặn bất kỳ partition đơn lẻ nào trở thành nút thắt cổ chai và gây ra throttling. Điều này có thể đạt được bằng cách thêm hậu tố ngẫu nhiên hoặc được tính toán vào các giá trị partition key. Bằng cách ngẫu nhiên hóa partition key, các ghi được phân bổ đều hơn trên không gian partition key, cải thiện tính song song và thông lượng tổng thể.</p><p>Tuy nhiên, truy vấn dữ liệu hết hạn yêu cầu thực hiện truy vấn cho từng shard trong phạm vi. Cách tiếp cận này đảm bảo rằng tất cả các partition có thể được kiểm tra để tìm các mục hết hạn, nhưng nó đòi hỏi nhiều truy vấn để bao phủ tất cả các shard.</p><p>Số lượng shard được tính toán dựa trên thông lượng ghi đỉnh dự kiến của bảng cơ sở bằng công thức sau﻿:</p><table><thead><tr><th style=text-align:left>number of shards = (peak write capacity units (WCU) / 1000) + buffer</th></tr></thead><tbody></tbody></table><p>Bao gồm buffer trong tính toán của bạn được khuyến nghị để đảm bảo bạn có đủ shard để tránh throttling trên bảng DynamoDB. Buffer cũng cung cấp phân phối bổ sung để xử lý các đỉnh bất ngờ trong thông lượng ghi, duy trì hiệu suất và độ tin cậy của ứng dụng.</p><p>Nếu về lâu dài WCU đỉnh dự kiến của bạn tăng, bạn có thể trước tiên sửa đổi Lambda function để truy vấn các shard bổ sung, và sau đó cập nhật ứng dụng để tăng số lượng shard khi ghi dữ liệu vào bảng. Lambda có thể truy vấn các shard không tồn tại trong GSI mà không gặp vấn đề.</p><h2 id=lựa-chọn-primary-key-cho-gsi><strong>Lựa chọn primary key cho GSI﻿</strong></h2><p>Khi chọn key cho GSI của bạn, partition key GSI_PK sẽ được tạo bằng một shard ngẫu nhiên, với phạm vi được xác định bởi tính toán trước đó để đảm bảo phân phối tải đều. Sort key sẽ là thuộc tính TTL của bạn, có thể được biểu diễn bằng số epoch hoặc định dạng thời gian chuỗi. Sự kết hợp này cho phép truy vấn hiệu quả các mục dựa trên thời gian hết hạn, trong khi partition key được chia sẻ giúp phân phối các hoạt động ghi và đọc trên nhiều partition, tối ưu hóa hiệu suất tổng thể và khả năng mở rộng của bảng DynamoDB.</p><h2 id=tối-ưu-chi-phí-indexing><strong>Tối ưu chi phí﻿ Indexing</strong></h2><p>Duy trì GSI hiệu quả bao gồm việc sử dụng﻿ <a href=https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_Projection.html>KEYS_ONLY</a> projection và đảm bảo index﻿ <a href=https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/bp-indexes-general.html#bp-indexes-general-projections>là sparse</a>. Bằng cách sử dụng﻿ KEYS_ONLY, GSI chỉ lưu trữ các thuộc tính primary key và các thuộc tính index key, giảm đáng kể chi phí lưu trữ và thông lượng. Ngoài ra, làm cho GSI sparse có nghĩa nó chỉ bao gồm các mục có thuộc tính TTL. Việc lập chỉ mục có chọn lọc này đảm bảo rằng chỉ các mục liên quan, những mục có thời gian hết hạn, được bao gồm trong GSI, tối ưu hóa thêm hiệu suất và sử dụng tài nguyên. Điều này không chỉ nâng cao hiệu quả truy vấn mà còn giúp quản lý chi phí bằng cách giữ cho index gọn và tập trung vào các mục yêu cầu quản lý TTL.</p><h2 id=mô-hình-dữ-liệu-mẫu><strong>Mô hình dữ liệu mẫu﻿</strong></h2><p>Mô hình dữ liệu ví dụ sau được thiết kế để xử lý quản lý trạng thái session trong môi trường thông lượng cao, nơi các session yêu cầu quản lý TTL chi tiết. Bằng cách chia sẻ GSI, chúng tôi phân phối tải ghi trên bốn shard để xử lý hiệu quả thông lượng đỉnh 3.000 WCU, với số lượng shard được chọn để bao gồm dung lượng buffer bổ sung vượt quá đỉnh dự kiến. Mỗi mục session bao gồm thuộc tính TTL để đảm bảo hết hạn kịp thời, và partition key của GSI (GSI_PK) là định danh shard ngẫu nhiên để cho phép truy vấn và xóa chính xác các session hết hạn, duy trì hiệu suất tối ưu và tính toàn vẹn dữ liệu﻿.</p><p>Ví dụ sau cho thấy﻿ SessionTable mà chúng tôi đã tạo bằng﻿ <a href=https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/workbench.html>NoSQL Workbench</a>:</p><p><img src=../../../images/3-Blog/Blog-2/image_2.png></p><p>Ví dụ sau cho thấy TTL GSI của chúng tôi﻿.</p><p><img src=../../../images/3-Blog/Blog-2/image_3.png></p><p>Với mô hình dữ liệu này, bây giờ chúng ta có thể truy vấn từng shard bằng GSI, áp dụng điều kiện trên thuộc tính timestamp TTL để xác định các bản ghi cũ hơn thời gian hiện tại. Điều này cho phép chúng ta tìm và loại bỏ hiệu quả các session hết hạn.</p><h2 id=điều-kiện-tiên-quyết><strong>Điều kiện tiên quyết﻿</strong></h2><p>Trước khi đi sâu vào triển khai giải pháp TTL tùy chỉnh, bạn nên có các điều kiện tiên quyết sau﻿:</p><ul><li><p><strong>AWS account</strong> – Truy cập vào một﻿ <a href=https://aws.amazon.com/free/>AWS account</a> hoạt động﻿</p></li><li><p><strong>DynamoDB basics</strong> – Hiểu biết cơ bản về﻿ <a href=https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/HowItWorks.CoreComponents.html>DynamoDB concepts</a>, bao gồm bảng, mục, thuộc tính và các hoạt động CRUD cơ bản, là cần thiết để cấu hình và quản lý cơ sở dữ liệu hiệu quả﻿</p></li><li><p><strong>Sharding</strong> – Hiểu biết cơ bản về﻿ <a href=https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/bp-indexes-gsi-sharding.html>sharding techniques</a> cho DynamoDB﻿</p></li><li><p><strong>Lambda functions</strong> – Bạn nên quen thuộc với﻿ <a href=http://aws.amazon.com/lambda>AWS Lambda</a>, vì bạn sẽ tạo và triển khai các Lambda function để truy vấn DynamoDB và chạy logic TTL tùy chỉnh﻿</p></li><li><p><strong>EventBridge basics</strong> – Kiến thức cơ bản về﻿ <a href=https://aws.amazon.com/eventbridge/>Amazon EventBridge</a> là cần thiết để thiết lập﻿ <a href=https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-create-rule-schedule.html>EventBridge Scheduler rules</a> để gọi Lambda function theo các khoảng thời gian cụ thể﻿</p></li><li><p><a href=https://aws.amazon.com/cli/><strong>AWS CLI</strong></a> <strong>hoặc thành thạo console﻿</strong> – Để cấu hình dịch vụ và giám sát log. Chúng tôi sử dụng﻿ <a href=https://aws.amazon.com/console/>AWS Management Console</a> trong suốt bài đăng này﻿.</p></li></ul><h2 id=tạo-bảng-dynamodb-với-gsi><strong>Tạo bảng DynamoDB với GSI﻿</strong></h2><p>Bước đầu tiên của chúng tôi là tạo bảng DynamoDB với﻿ <a href=https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Streams.html>Amazon DynamoDB Streams</a> được bật. Hoàn thành các bước sau﻿:</p><ol><li><p>Trên console DynamoDB, chọn﻿ <strong>Tables</strong> trong navigation pane﻿.</p></li><li><p>Chọn﻿ <strong>Create table</strong>.</p></li><li><p>Với <strong>Table name</strong>, nhập tên cho bảng mới của bạn﻿.</p></li><li><p>Với <strong>Partition key</strong>, nhập PK làm tên và chọn﻿ <strong>String</strong> làm kiểu﻿.</p></li><li><p>Với <strong>Sort key</strong>, nhập SK làm tên và chọn﻿ <strong>String</strong> làm kiểu﻿.</p></li></ol><p><img src=../../../images/3-Blog/Blog-2/image_4.png></p><ol start=6><li><p>Với <strong>Table settings</strong>, chọn﻿ <strong>Customize settings</strong>. Tùy chọn﻿ <strong>Customize settings</strong> cũng cho phép bạn định nghĩa secondary index trên bảng, bật/tắt deletion protection, chuyển đổi kiểu mã hóa và thêm resource tag khi tạo bảng.</p></li><li><p>Với <strong>Read/write capacity settings</strong>, đảm bảo﻿ <strong>On-demand</strong> được chọn﻿.</p></li></ol><p><img src=../../../images/3-Blog/Blog-2/image_5.png></p><ol start=8><li><p>Cuộn xuống phần﻿ <strong>Secondary indexes</strong>.</p></li><li><p>Chọn﻿ <strong>Create global index</strong>.</p></li><li><p>Với <strong>Partition key</strong>, nhập GSI_PK làm tên và chọn﻿ <strong>String</strong> làm kiểu﻿.</p></li><li><p>Cho﻿ <strong>Sort key</strong>, nhập TTL làm tên và chọn﻿ <strong>String</strong> làm kiểu﻿.</p></li><li><p>Với﻿ <strong>Index name</strong>, nhập tên cho index mới của bạn﻿.</p></li><li><p>Với <strong>Attribute projections</strong>, chọn﻿ <strong>Only keys</strong>.</p></li><li><p>Chọn﻿ <strong>Create index</strong>.</p></li></ol><p><img src=../../../images/3-Blog/Blog-2/image_6.png></p><ol start=15><li>Để tất cả cấu hình khác mặc định và chọn﻿ <strong>Create table</strong>.</li></ol><h2 id=tạo-lambda-function><strong>Tạo Lambda﻿ function</strong></h2><p>Tiếp theo, chúng tôi cấu hình Lambda function sẽ được gọi bởi EventBridge Scheduler. Lambda function này chịu trách nhiệm lấy các mục đủ điều kiện để xóa và xóa những mục đó. Hoàn thành các bước sau:</p><ol><li><p>Trên console Lambda, chọn﻿ <strong>Functions</strong> trong navigation pane﻿.</p></li><li><p>Chọn﻿ <strong>Create function</strong>.</p></li><li><p>Chọn﻿ <strong>Author from scratch</strong>.</p></li><li><p>Với <strong>Function name</strong>, nhập tên (ví dụ, StrictDataManagement)﻿.</p></li><li><p>Với <strong>Runtime</strong>, chọn﻿ <strong>Python 3.12</strong>.</p></li><li><p><a href=https://docs.aws.amazon.com/lambda/latest/dg/lambda-permissions.html>Thêm policy</a> cho phép hàm đọc từ GSI và ghi vào bảng﻿:</p></li></ol><pre tabindex=0><code>{
    &#34;Version&#34;: &#34;2012-10-17&#34;,
    &#34;Statement&#34;: [
        {
            &#34;Sid&#34;: &#34;ReadFromGSI&#34;,
            &#34;Effect&#34;: &#34;Allow&#34;,
            &#34;Action&#34;: [
                &#34;dynamodb:Query&#34;
            ],
            &#34;Resource&#34;: [
                &#34;arn:aws:dynamodb:&lt;region&gt;:&lt;account-id&gt;:table/&lt;table-name&gt;&#34;,
                &#34;arn:aws:dynamodb:&lt;region&gt;:&lt;account-id&gt;:table/&lt;table-name&gt;/index/&lt;gsi-name&gt;&#34;
            ]
        },
        {
            &#34;Sid&#34;: &#34;WriteToTable&#34;,
            &#34;Effect&#34;: &#34;Allow&#34;,
            &#34;Action&#34;: [
                &#34;dynamodb:DeleteItem&#34;
            ],
            &#34;Resource&#34;: &#34;arn:aws:dynamodb:&lt;region&gt;:&lt;account-id&gt;:table/&lt;table-name&gt;&#34;
        }
    ]
}
</code></pre><ol start=7><li>Chọn﻿ <strong>Create function</strong>.</li></ol><p><img src=../../../images/3-Blog/Blog-2/image_7.png></p><ol start=8><li>Trên tab﻿ <strong>Code</strong> của Lambda function, thay thế mã Lambda function bằng mã sau. Thay đổi các hằng số﻿, SHARDS, TABLE_NAME, và﻿ INDEX_NAME để phù hợp với yêu cầu cụ thể của bạn﻿:</li></ol><pre tabindex=0><code>import boto3
from datetime import datetime

# Constants
SHARDS = 4
TABLE_NAME = &#39;TTL-Table&#39;
INDEX_NAME = &#39;TTL-index&#39;

dynamodb = boto3.resource(&#39;dynamodb&#39;)
table = dynamodb.Table(TABLE_NAME)

def lambda_handler(event, context):
    current_time = datetime.now().replace(second=0, microsecond=0).isoformat()
    
    for shard in range(SHARDS):
        shard_key = str(shard)
        query_and_delete_expired_items(shard_key, current_time)

def query_and_delete_expired_items(shard_key, current_time):
    last_evaluated_key = None
    
    while True:
        # Print for logging purposes
        print(f&#34;Checking shard {shard_key} at {current_time}&#34;)
        
        query_kwargs = {
            &#39;IndexName&#39;: INDEX_NAME,
            &#39;KeyConditionExpression&#39;: &#39;GSI_PK = :shard AND #ttl &lt; :current_time&#39;,
            &#39;ExpressionAttributeValues&#39;: {
                &#39;:shard&#39;: shard_key,
                &#39;:current_time&#39;: current_time
            },
            &#39;ExpressionAttributeNames&#39;: {
                &#39;#ttl&#39;: &#39;TTL&#39;
            }
        }
        
        if last_evaluated_key:
            query_kwargs[&#39;ExclusiveStartKey&#39;] = last_evaluated_key
            
        response = table.query(**query_kwargs)
        
        items_to_delete = response.get(&#39;Items&#39;, [])
        
        if items_to_delete:
            delete_expired_items(items_to_delete)
        
        last_evaluated_key = response.get(&#39;LastEvaluatedKey&#39;)
        
        if not last_evaluated_key:
            break

def delete_expired_items(items):
    with table.batch_writer() as batch:
        for item in items:
            batch.delete_item(
                Key={
                    &#39;PK&#39;: item[&#39;PK&#39;],
                    &#39;SK&#39;: item[&#39;SK&#39;]
                }
            )
</code></pre><ol start=9><li>Chọn﻿ <strong>Deploy</strong> để triển khai mã hàm mới nhất﻿.</li></ol><p>Hàm﻿ delete_expired_items sử dụng﻿ <a href=https://boto3.amazonaws.com/v1/documentation/api/latest/index.html>Boto3</a> <a href=https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/dynamodb/table/batch_writer.html>batch_writer</a> để thực hiện xóa hàng loạt cho hiệu quả. Tuy nhiên﻿, batch_writer không hỗ trợ﻿ <a href=https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Expressions.OperatorsAndFunctions.html>ConditionExpression</a>, có nghĩa là không có cách nào để kiểm tra xem một mục vẫn đủ điều kiện để xóa tại thời điểm ghi. Điều này có thể rủi ro trong các trường hợp sử dụng mà giá trị TTL có thể đã thay đổi giữa lần đọc ban đầu và nỗ lực xóa. Để tránh vô tình xóa các mục không còn hết hạn, được khuyến nghị sử dụng hoạt động DeleteItem với﻿ ConditionExpression xác minh giá trị TTL vẫn trong phạm vi mong đợi﻿.</p><h2 id=tạo-eventbridge-scheduler><strong>Tạo EventBridge Scheduler﻿</strong></h2><p>Bây giờ chúng tôi tạo lịch trình EventBridge gọi Lambda function mỗi 5 phút. Bạn có thể điều chỉnh khoảng thời gian này để phù hợp với yêu cầu loại bỏ dữ liệu của bạn.</p><ol><li><p>Trên console EventBridge, chọn﻿ <strong>Schedules</strong> trong navigation pane﻿.</p></li><li><p>Chọn﻿ <strong>Create schedule</strong>.</p></li><li><p>Cho﻿ <strong>Schedule name</strong>, nhập tên cho lịch trình mới của bạn﻿.</p></li><li><p>Cho﻿ <strong>Schedule pattern</strong>, chọn﻿ <strong>Recurring schedule</strong>.</p></li><li><p>Cho﻿ <strong>Schedule type</strong>, chọn﻿ <strong>Rate-based schedule</strong>.</p></li><li><p>Cho﻿ <strong>Rate expression</strong>, đặt﻿ <strong>Value</strong> thành﻿ <strong>5</strong> và﻿ <strong>Unit</strong> thành﻿ <strong>minutes</strong>.</p></li><li><p>Cho﻿ <strong>Flexible time window</strong>, chọn﻿ <strong>Off</strong>.</p></li><li><p>Để tất cả cấu hình khác mặc định và chọn﻿ <strong>Next</strong>.</p></li></ol><p><img src=../../../images/3-Blog/Blog-2/image_8.png></p><ol start=9><li><p>Cho﻿ <strong>Templated targets</strong>, chọn﻿ <strong>AWS Lambda Invoke</strong>.</p></li><li><p>Cho﻿ <strong>Lambda function</strong>, chọn Lambda function StrictDataManagement của bạn﻿.</p></li><li><p>Để tất cả cấu hình khác mặc định và chọn﻿ <strong>Next</strong>.</p></li></ol><p><img src=../../../images/3-Blog/Blog-2/image_9.png></p><ol start=12><li><p>Cho﻿ <strong>Action after schedule completion</strong>, chọn﻿ <strong>NONE</strong>.</p></li><li><p>Để tất cả cấu hình khác mặc định và chọn﻿ <strong>Next</strong>.</p></li></ol><p><img src=../../../images/3-Blog/Blog-2/image_10.png></p><ol start=14><li>Xem lại cấu hình của bạn và chọn﻿ <strong>Create schedule</strong>.</li></ol><p><img src=../../../images/3-Blog/Blog-2/image_11.png></p><h2 id=tạo-mục-mẫu-để-xem-giải-pháp-hoạt-động><strong>Tạo mục mẫu để xem giải pháp hoạt động﻿</strong></h2><p>Bạn có thể kiểm tra giải pháp bằng cách thêm mục vào bảng DynamoDB với giá trị TTL. Đây là ví dụ tạo 10 mục mẫu với giá trị TTL bằng AWS CLI﻿:</p><pre tabindex=0><code>#!/bin/bash

TABLE=&#34;TTL-Table&#34;

for PK_VALUE in {1..10}; do
    # Get current UTC time in ISO 8601 format
    ISO_TIMESTAMP=$(date -u +&#34;%Y-%m-%dT%H:%M:%SZ&#34;)
    
    # Generate a random shard value between 0 and 3
    GSI_PK_VALUE=$((RANDOM % 4))  
    
    # Put item into DynamoDB
    aws dynamodb put-item --table-name $TABLE \
    --item &#39;{&#34;PK&#34;: {&#34;S&#34;: &#34;&#39;$PK_VALUE&#39;&#34;}, &#34;SK&#34;: {&#34;S&#34;: &#34;StaticSK&#34;}, &#34;GSI_PK&#34;: {&#34;S&#34;: &#34;&#39;$GSI_PK_VALUE&#39;&#34;}, &#34;TTL&#34;: {&#34;S&#34;: &#34;&#39;$ISO_TIMESTAMP&#39;&#34;}, &#34;SessionData&#34;: {&#34;S&#34;: &#34;{\&#34;cart\&#34;: \&#34;item&#39;$PK_VALUE&#39;\&#34;}&#34;}}&#39; 
done
</code></pre><p>Để theo dõi các hoạt động xóa trên bảng DynamoDB của bạn, điều hướng đến tab﻿ <strong>Monitoring</strong> trên console DynamoDB. Trong thiết lập này, lịch trình EventBridge gọi Lambda function mỗi 5 phút để lấy và xóa mục bằng lệnh﻿ BatchWriteItem. Bạn có thể theo dõi các hoạt động xóa bằng cách xem metric﻿ SuccessfulRequestLatency cho hoạt động﻿ BatchWriteItem, sử dụng thống kê﻿ <strong>Sample Count</strong> để xem số lần gọi xóa. Để biết thêm chi tiết về metrics DynamoDB, tham khảo﻿ <a href=https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/metrics-dimensions.html>DynamoDB Metrics and dimensions</a>.</p><p>Biểu đồ sau cho thấy﻿ BatchWriteItem được gọi bốn lần, một lần gọi cho mỗi shard được định nghĩa cho trường hợp sử dụng của chúng tôi﻿.</p><p><img src=../../../images/3-Blog/Blog-2/image_12.png></p><h2 id=cân-nhắc-chi-phí><strong>Cân nhắc chi phí﻿</strong></h2><p>Chi phí sử dụng phương pháp này cho 1.000.000 mục TTL được ước tính trong bảng sau với so sánh sử dụng chức năng DynamoDB gốc. Mỗi mục DynamoDB nhỏ hơn 1KB và được lưu trữ trong bảng sử dụng chế độ on-demand ở Region us-east-1. Free tier không được xem xét cho phân tích này.</p><table><thead><tr><th style=text-align:left></th><th style=text-align:left>TTL gần thời gian thực</th><th style=text-align:left>TTL DynamoDB bản địa</th></tr></thead><tbody><tr><td style=text-align:left>DynamoDB global secondary index</td><td style=text-align:left>Viết: $0.63 Đọc: $0.11</td><td style=text-align:left>-</td></tr><tr><td style=text-align:left>Lambda</td><td style=text-align:left></td><td style=text-align:left></td></tr><tr><td style=text-align:left>EventBridge Scheduler</td><td style=text-align:left>$1</td><td style=text-align:left>-</td></tr><tr><td style=text-align:left>DynamoDB Delete</td><td style=text-align:left>$1.26</td><td style=text-align:left>-</td></tr><tr><td style=text-align:left><strong>Tổng Chi phí</strong></td><td style=text-align:left>$2.43</td><td style=text-align:left>$0</td></tr></tbody></table><h2 id=dọn-dẹp><strong>Dọn dẹp﻿</strong></h2><p>Nếu bạn tạo môi trường kiểm tra để theo dõi bài đăng này, hãy đảm bảo﻿:</p><ol><li><p><a href=https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/getting-started-step-6.html>Xóa DynamoDB table﻿</a></p></li><li><p><a href=https://docs.aws.amazon.com/lambda/latest/dg/urls-webhook-tutorial.html#urls-webhook-tutorial-cleanup>Xóa Lambda function﻿</a></p></li><li><p><a href=https://docs.aws.amazon.com/scheduler/latest/UserGuide/managing-schedule-delete.html>Xóa EventBridge schedule﻿</a></p></li><li><p><a href=https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_manage_delete.html>Xóa bất kỳ IAM role nào còn lại được tạo trong quá trình này</a>﻿</p></li><li><p>Xóa bất kỳ tài nguyên nào khác bạn tạo để kiểm tra giải pháp﻿.</p></li></ol><h2 id=tóm-tắt><strong>Tóm tắt﻿</strong></h2><p>Trong bài đăng này, chúng tôi đã thảo luận về cách DynamoDB GSI kết hợp với EventBridge và Lambda cung cấp giải pháp mạnh mẽ để quản lý hết hạn dữ liệu trong thời gian thực, cung cấp hiệu suất ứng dụng tối ưu và xử lý dữ liệu hiệu quả.</p><p>Trong﻿ <a href=https://aws.amazon.com/blogs/database/implement-event-driven-architectures-with-amazon-dynamodb-part-3/>Phần 3﻿</a>, chúng tôi khám phá cách EventBridge Scheduler có thể cho phép lập lịch chi tiết các sự kiện downstream. Phương pháp này cung cấp quản lý dữ liệu tương lai chính xác cho ứng dụng của bạn, nâng cao kiến trúc hướng sự kiện của bạn.</p><hr><h2 id=về-các-tác-giả><strong>Về các tác giả﻿</strong></h2><table><thead><tr><th style=text-align:left><img src=../../../images/3-Blog/Blog-1/image_11.png> Lee Hannigan <a href=https://www.linkedin.com/in/lee-hannigan/>Lee</a> Hannigan là Chuyên gia giải pháp DynamoDB cao cấp (Sr. DynamoDB Specialist Solutions Architect) làm việc tại Donegal, Ireland. Anh có chuyên môn sâu rộng về các hệ thống phân tán (distributed systems), cùng nền tảng vững chắc về các công nghệ dữ liệu lớn (big data) và phân tích (analytics technologies). Trong vai trò Chuyên gia giải pháp DynamoDB, Lee xuất sắc trong việc hỗ trợ khách hàng thiết kế, đánh giá và tối ưu hóa khối lượng công việc (workloads) sử dụng các khả năng của DynamoDB.</th></tr></thead><tbody></tbody></table><table><thead><tr><th style=text-align:left><img src=../../../images/3-Blog/Blog-1/image_12.png> Aman Dhingra <a href=https://www.linkedin.com/in/amdhing/>Aman</a> Dhingra là Chuyên gia giải pháp DynamoDB cao cấp (Sr. DynamoDB Specialist Solutions Architect) làm việc tại Dublin, Ireland. Anh có đam mê về các hệ thống phân tán (distributed systems) và nền tảng chuyên sâu về dữ liệu lớn & phân tích (big data & analytics). Aman là tác giả của cuốn &ldquo;Amazon DynamoDB – The Definitive Guide&rdquo; và hỗ trợ khách hàng trong việc thiết kế, đánh giá và tối ưu hóa khối lượng công việc vận hành trên Amazon DynamoDB.</th></tr></thead><tbody></tbody></table><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=../../../vi/3-blogstranslated/3.3-blog3/ title="Blog 3"><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=../../../vi/4-eventparticipated/ title="Các sự kiện đã tham gia" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=../../../js/clipboard.min.js?1765364000></script><script src=../../../js/perfect-scrollbar.min.js?1765364000></script><script src=../../../js/perfect-scrollbar.jquery.min.js?1765364000></script><script src=../../../js/jquery.sticky.js?1765364000></script><script src=../../../js/featherlight.min.js?1765364000></script><script src=../../../js/highlight.pack.js?1765364000></script><script>hljs.initHighlightingOnLoad()</script><script src=../../../js/modernizr.custom-3.6.0.js?1765364000></script><script src=../../../js/learn.js?1765364000></script><script src=../../../js/hugo-learn.js?1765364000></script><link href=../../../mermaid/mermaid.css?1765364000 rel=stylesheet><script src=../../../mermaid/mermaid.js?1765364000></script><script>mermaid.initialize({startOnLoad:!0})</script><script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,(e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date),(i=t.createElement(n),a=t.getElementsByTagName(n)[0]),i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-158079754-2","auto"),ga("send","pageview")</script></body></html>